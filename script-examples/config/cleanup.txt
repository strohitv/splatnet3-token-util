#####
# EXECUTE ON PIXEL 4 / ANDROID API LEVEL 30 WITH PLAY STORE EMULATOR
#####

echo
echo Close NSA
echo '#########'
echo

execute_command_as_long_as_region_matches -f ./screenshots/template-splatnet3-opened.png -x1 25 -y1 100 -x2 250 -y2 250 -d 500 -asp ./screenshots/actual/actual-task-manager-opened.png -c "tap -x 855 -y 2215"
execute_command_until_region_matches -f ./screenshots/template-task-manager.png -x1 110 -y1 1000 -x2 270 -y2 1050 -d 500 -asp ./screenshots/actual/actual-task-manager-swiped.png -c "swipe -x1 100 -y1 1200 -x2 900 -y2 1200 -d 200"
execute_command_as_long_as_region_matches -f ./screenshots/template-task-manager.png -x1 110 -y1 1000 -x2 270 -y2 1050 -d 500 -asp ./screenshots/actual/actual-task-manager-close-all.png -c "tap -x 200 -y 1030"

echo
echo Shutdown emulator
echo '#################'
echo

execute_command_until_region_matches -f ./screenshots/template-power-menu.png -x1 450 -y1 250 -x2 620 -y2 430 -d 1000 -asp ./screenshots/actual/actual-power-menu.png -c "long_press_power_button"
execute_command_as_long_as_region_matches -f ./screenshots/template-power-menu.png -x1 450 -y1 250 -x2 620 -y2 430 -d 1000 -asp ./screenshots/actual/actual-power-button-tapped.png -c "tap -x 540 -y 315"
